---
layout: post
title:  "Remdet1-Remdet3 с 18 февраля 2012г. по 10 июля 2012г."
categories: Remdet
tags: Remdet
author: Alex Koblov
description: История разработки пробора.
img: history01/7bd3b93f21161c10ea2503e85f942062.jpg # Add image post (optional)
---

<!-- <h1>с 18 февраля 2012г. по 10 июля 2012г.</h1> -->
<!--<h1>История разработок. Часть 1</h1>-->
<!--<h2>&#1089; 18 &#1092;&#1077;&#1074;&#1088;&#1072;&#1083;&#1103; 2012&#1075;. &#1087;&#1086; 10 &#1080;&#1102;&#1083;&#1103; 2012&#1075;.</h2> -->


 
  <p>Картинки с комментариями, общение происходило на сайте http://ya.snovidec.org/:
  <br>
<p><img src="{{ site.baseurl }}/assets/images/history01/31d4e4ca2c735ee60e9fa2f4fed71da5.jpg" alt="img" width="597" class="img-rounded"></p> 
    <br>Самодельная маска для сна, на неё закреплялся Remdetector v1.5<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/a33fca729603f72bce5fff02e0a9890f.jpg" alt="img" width="597" class="img-rounded"></p> 
    <br>График выдаваемый акселерометром по оси X (плату двигаю по оси X)<br>
    <br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/7df80d861af2a85c4927325be9dc6c51.jpg" alt="img" width="597" class="img-rounded"></p> 
    <br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/36f40b526abf3faf8a372b377d54b64b.jpg" alt="img" width="597" class="img-rounded"></p> 
    <br>График выдаваемый акселерометром по оси Z (плату двигаю по оси Z т.е. вверх вниз трясу)<br>
    <br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/ba4aa977f38c110c7e4885f9dc364426.jpg" alt="img" width="597" class="img-rounded"></p> 
    <br>График с датчиков движения глаз (тут движение пальцев над датчиками)<br>
    <br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/f9e85be6b117d52b1bb29a58b8c96b73.jpg" alt="img" width="597" class="img-rounded"></p> 
    <br>Дыхание в микрофон (частота дискретизации 250Гц, именно Гц, а не КГц) Вообще все датчики работают на частоте 250Гц<br>
    <br>
   
    Артём
Синин: А дыхание с микрофона, да? Микрофон не лучшим образом дыхание
ловит. В таком мощном приборе бы термодатчики лучше, наверное, подошли.
А микрофон ко рту - для диктофонных записей. А я вот завтра уже как раз
от Люка посылочку буду забирать. С поясным датчиком.. <br>
<br>
Александр
Коблов: на нем есть термодатчик ds18b20 но он в корпусе, а значит очень
инерционный, чтобы дыхание отслеживать нужно попробовать термопару без
корпуса задействовать, у нее быстрая реакция должна быть на вдохи и
выдохи, но все равно она должна быть в струе воздуха из носа, но и
микрофон вроде нормально этот поток ловит<br>
<br>
Артём Синин: Это на
дневном дыхании микрофон хорошо ловит. А ночью - дыхание может
становиться временами очень тихое, нос периодически частично
закладывает, плюс у некоторых храп. В общем - поясной вариант в этом
смысле, гораздо удобнее.<br>
<br>
Александр Коблов: Да насчет
поясного-нагрудного варианта нужно подумать, и предусмотреть
возможность его подключения, а есть какие нибудь конкретные модели
датчика поясного ? или его самому можно сделать по тому же принципу что
светодиод<->фототранзистор сближаются отдаляются в какой нибудь
трубочке, или какая нибудь заслонка между ними двигается от дыхания.<br>
<br>
Артём
Синин: По этой теме Люк у нас специалист. Вот тут глянь:
http://ya.snovidec.org/blogs/universalnyi-trenazhyor-snovidcev-sozdayom-pribor/pojasnoi-oneirograf-pojasnoi-datchik-dyhanija.html<br>
Завтра этот датчик будет у меня. Посмотрю, потестирую, напишу... <br>
<br>
Александр
Коблов: да посмотрел интересно, т.е. ты предлагаешь вообще не
заморачиваться с микрофоном, а использовать этот канал для поясного
датчика ?<br>
<br>
Артём Синин: Я думаю, хорошо, если можно будет
подключать и отключать разные датчики. Хочешь такой, хочешь этакий. Я
сейчас готовлю статью для нового номера журнала на этот счёт - с
подробным описанием моей идеи общей логики и архитектуры комплекса.<br>
<br>
Александр Коблов: Да хотелось бы эту статью почитать.<br>
<br>
Люк:
чем меньше подвижных частей, тем лучше. сейчас делаю вторую версию
датчика дыхания на датчиках холла. Александр, ты только пики прогаешь,
или с атмелами тоже работаешь?<br>
<br>
Александр Коблов: Атмелы могу
прошивать, но программы под них никогда не писал, только лабораторные в
институте, усиленно в институте учили пики вот на них и остановился :))<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/1c3186804f8753ace0f9e7844317f9c4.jpg" alt="img" width="597" class="img-rounded"></p> 
<br>Артём Синин: Слушай, супер-вещь. И пульс показывает уже, да? Вот бы
посмотреть на взаимосвязь пульса и дыхания во время REM. Напиши хоть
коротенькую статью с обзором - так интересно... <br>
<br>
Александр Коблов: да показывает, это с пальца, но планирую снимать с межбровья, прикладывал и там снимает.<br>
<br>
Артём
Синин: Ну ты практически уже всё сделал, что мы только придумываем.
Здорово.. Надо теперь программу писать с единым комплексом обработки
всех устройств... <br>
<br>
Александр Коблов: нужно теперь развести это все под маленькую печатную плату<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/89082e4d6eefdc97e09a3eedaed908b7.jpg" alt="img" width="597" class="img-rounded"></p> 
<br>Более точно: Гальваническая развязка питания и Оптическая развязка сигналов.<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/7bd3b93f21161c10ea2503e85f942062.jpg" alt="img" width="597" class="img-rounded"></p> 
<br>Remdetector v1.0 на pic12f675 данные идут в комп через RS232-USB 
преобразователь, там регистрируются, анализируются, с компа выдается 
сигнал включить пищалку и светодиоды. Отличие - очень низкая 
чувствительность. (Сейчас у меня есть подозрения что ИК светодиод сильно
 светил, но эта версия еще не проверенная)<br>
 <br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/6b646984949c78c6a7a211442ba70374.jpg" alt="img" width="597" class="img-rounded"></p> 
<br>Remdetector v1.5 в отличии от первой тут добавлен усилитель на LM358<br>
 <br>
 Артём
Синин: У тебя есть возможность платки такие профессиональные делать,
да? А во сколько может обойтись изготовление таких платок? p.s. А, вот,
увидел инфу по ссылке - http://pselectro.ru/<br>
<br>
Александр Коблов:
Да платы можно будет делать качественные. Сейчас главное сделать
разводку второй версии. Пока не делаю, потому что постоянно изменения в
схему вношу.<br>
<br>
Артём Синин: Ты к этой фирме имеешь отношение, да?
Вот бы нам поясной вариант Люка миниатюризировать - я бы уже на
предзаказ тогда ряд позиций поставил (видеопособие и такой поясной
онейрограф, как минимум). А вопрос с графитом для трубки я, наверное,
решу. У меня как раз есть знакомства в НИИ Графит - наверняка можно
будет договориться, может даже и часть производства им предложить взять
на себя. Но это если на запад расчитывать - у нас-то заказов маловато,
наверняка, будет, для производства.<br>
<br>
Люк: кстати да. в проводном варианте он будет размером со спичечный коробок, а в беспроводном не на много больше.<br>
<br>
Александр
Коблов: Артем Да я являюсь представителем завода по производству
печатных плат ООО "Электроконнект" в Ростове-на-Дону, мы можем делать
платы и монтаж и комплектацию предоставляем, полный цикл производства
электронного изделия. http://pselectro.ru/rst Люк Разводи печатную
плату, изготовим. Можно сделать прототипы плат даже бесплатно, за счет
спонсора - ООО "Электроконнект", но для этого на каждой стороне платы
должна быть надпись "www.pselectro.ru", я так свои делал.<br>
<br>
Александр
Коблов: Цена на платы очень сильно зависит от кол-ва плат, размера,
кол-ва слоев, он наличия маски, маркировки. Например: 2 слоя, с двумя
масками(зеленкой), 30x30мм, если заказывать 200шт, то цена за плату
27.4руб, если 1200шт то 11.91руб, и т.д. цена сильно падает. Вот
калькулятор, где можно легко цену посчитать http://pselectro.ru/calc/<br>
<br>
Артём
Синин: В общем, я понял. У нас теперь всё тип-топ... Мозаика
сложена. Теперь осталось детали этого пейзажа дорисовать. <br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/e7439070ba94d468a435656ade762232.jpg" alt="img" width="597" class="img-rounded"></p> 
<br>Remdetector v2.0 пока только на макетной плате<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/43c767d8a5057aa8106ebc61953fb563.jpg" alt="img" width="597" class="img-rounded"></p> 
<br>Артём Синин: Это всё по COM-порту, да? А на USB-интерфейс можно всё
перевести? Хорошо бы, конечно, чтобы был один центральный модуль, от
него один USB-шлейф к компу, а все остальные модули, как в
конструкторе, чтобы к центру подключились. Когда-нибудь так, наверняка,
и будет. В общем, в журнале распишусь на этот счёт. Пофантазирую.<br>
<br>
Люк: Артем, не волнуйся, будет USB.<br>
<br>
Александр
Коблов: RS232 (Com) порт выбран специально, для удешевления
гальванической развязки по питанию и оптической развязки по сигналам.
Мы же делаем фактически медицинский прибор и гальваническая развязка на
2-5 тысяч вольт необходима. Кто будет отвечать если человека в лицо
220вольт шарахнет из-за глюканувшего блока питания компа. Чтобы такого
не было ставится гальваническая развязка, да и от помех и наводок
всяких она освобождает. К тому же на данный момент гальваническая
развязка по USB стоит достаточно дорого (например только чип
ADUM4160BRWZ от 300 до 700руб, к нему еще и питание нужно развязывать)
и не везде можно купить, со временем ситуация возможно изменится. К
компьютеру я подключаю Remdetector по USB. Фотка этого преобразователя
http://ya.snovidec.org/users/85/photo215.html. Он не покупной, а
полностью самодельный на ftdi ft232rl и специально разделен с
Remdetectorom на разные платы. К Com порту подключить нельзя в
принципе, потому что у меня в схеме нет преобразователя уровней max232,
в моей схеме уровни сигналов в RS232 - TTL( т.е.5V), а для Сom порта
нужно +15В -15В (которые делает max232)<br>
<br>
Люк: грубо говоря
принцип такой usb -> преобразователь юсб\ком -> гальваничесская
развязка -> шнурок к девайсу -> девайс говоря простым языком -
юсб будет :)<br>
<br>
Александр Коблов: да, все точно так :)<br>
<br>
Артём
Синин: Всё понял ребят, спасибо. Я когда с LPT возился - то просто
проблема была, что преобразователь не правильно работал, для наших
целей. Но с такой командой, я уверен, всё будет как надо.. <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/33de6e68ca710be1700f3266ded159e3.jpg" alt="img" width="597" class="img-rounded"></p>
<br>график температуры  (взялся пальцами за датчик)<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/6b5623b7cca04c412359acecfb896cd1.jpg" alt="img" width="597" class="img-rounded"></p><br>

<br>Блок схема, пока макета второй версии Remdetectora<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/f21af6d6a3c67ff8ee874b86a1fb4a3d.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Принципиальная схема 4x канального усилителя LMV324S: 1-глаз, 2-глаз, 3-микрофон, 4-пульс<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/d3ff527ae21c4b2ae2c2b243e5a58819.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Самодельная маска для сна, на неё закреплялся Remdetector v1.0<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/51d75ea47760b8452184a9acc323b2fb.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Принципиальная схема преобразователя RS232-USB c оптическо гальванической развязкой<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/99c5d03c9db2eb1dec75a00c3d63f356.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Принципиальная схема первой версии Remdetectora<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/cacc286b650384a343a67b4556fc1dc8.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Только расставил хаотично компоненты, а место на плате уже закончилось. 
Размер платы увеличивать не хочется. Видимо придется переходить на 
типоразмер резисторов и конденсаторов с 0805 на 0608, потому-то разъем 
SD карты еще не поставил, да и плата точно будет не 2х слойная, думаю 4х
 слойная. Или детальки размещать с двух сторон, что тоже не желательно.<br>
 <br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/6dc18b1e6c73c79c08b7ea116130e196.jpg" alt="img" width="597" class="img-rounded"></p><br><br>
<br>Способ замера штангенциркулем: Перед зеркалом, закрыть один глаз, 
смотреть прямо, выставить неподвижную часть штангенциркуля по центру 
зрачка, закрыть этот и открыть другой, смотреть прямо, выставить 
подвижную чать штангенциркуля. Если нет штангенциркуля померьте как 
нибудь расстояние между центрами зрачков, нужно для создания 
REMDETECTORa.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/6acb4427eac1609135f7ae5354a7b3ca.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Тоже самое но резисторы и конденсаторы заменены с 0805 на 0603, сильно легче
не стало, видимо придется компонетны распологать с двух сторон, что
конечно плохо отразится на цене изделия<br>
<br>
Вячеслав: ставьте 0402<br>
<br>
Люк: злые вы....я детали меньше чем 1206 очень не люблю паять.<br>
<br>
Александр
Коблов: 0402 конечно сложно, но в принципе можно припаять паяльником,
вот как получится вручную припаивать акселерометр LIS3DH в корпусе
LGA-16 на плату, это я еще не знаю, сам такое еще не паял. В макете он
у меня перевернутый и к каждой ножке припаян проводок, все висит
буквально на соплях. Надежда, что получится припаять этим
способом:http://www.youtube.com/watch?v=z3i3kAnX3Z8<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/63144efa5467b5696c9bd54cb9fffb73.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Масштабное сравнение.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/97961ddcb8fbb33793ba4108ac37365b.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Очередная схема REMDETECTORa, решил вернуть номер версии 2, т.к. ее в реалном
исполнении не было (был только макет). Схему закачал так же в PDF, см.
в файлах. Сразу скажу что AD7799 подключил специально упрощенно без
аналоговой земли и отдельного аналогового питания, знаю что это не
правильно, но в качестве эксперимента для уменьшения кол-ва
компонентов, хочу попробовать, может для наших целей и так сгодится.<br>
<br>
bigear: могу сказать впечатлен .принцип действия даже поверхностно не
понял до сути не докопался как это все в комплексе должно
приблизительно работать<br>
<br>
Александр Коблов: Суть - обнаружить
прибором фазу быстрого сна, и подать подсказки - что нужно сделать
проверку на реальность. Например идешь ты по улице и видишь что
начинает мигать лампочка на фонарном столбе. Сделай проверку на
реальность, например прочитай несколько раз отворачиваясь один и тот же
текст, или посмотри на электронные часы, и т.п. По любому ты должен
быть готов к проверке на реальность, иначе ты просто пройдешь мимо
мигающего фонарного столба. А если мигание сделать слишком долгим и
интенсивным то ты просто проснешься. Про столб это просто пример, там
может быть что угодно мигать, или пищать или вибрировать.<br>
<br><br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/bdcaff788d48e7570d5d1897a77fa247.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Со схемой вроде определился, начал разводку печатной платы, будет точно 4х
слойная, компоненты с двух сторон. Сейчас развожу резисторы и
конденсаторы 0603, посмотрю если будет место перделаю на 0805.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/9be5475b962669c60b8c92c9564a621d.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/f205302e5ab1a3083d3941c9c62ed907.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/77168d7a9ce5729880b2446c0a7eb75b.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Переставил компоненты, переразвел аккуратней плату, резисторы и 
конденсаторы остаются 0603. У кого будет желание могут переразвести под 
0805, хотя места практически нет.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/5f86b6387b9209dd8cabd8f66e4f8463.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Итоговый вариант третьей версии, заказал изготовление платы.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/f65d0d27742df4ffd1c810e9502942ea.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Итоговый вариант третьей версии, заказал изготовление платы.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/6f496f91150325d18f2c67d537cfe374.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Итоговый вариант третьей версии, заказал изготовление платы.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/5c3d521db84ff2bfbaf128c83fdda11c.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Итоговый вариант третьей версии, заказал изготовление платы.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/0da3a1e58b41ae32d20b81103793a9e8.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Сегодня начал монтировать одну платку, припаял разъем,
акселерометр, микроконтроллер, несколько конденсаторов. Залил прошивку,
микроконтроллер запустился, графики от акселерометра бегут по экрану,
так что все покайфу. Самым сложным и неизвестным для меня было
припаивание LGA-16 корпуса акселерометра. У него размер 3х3мм и 16
выводов, снизу, как у BGA. Благодаря этим видео
http://www.youtube.com/watch?v=z3i3kAnX3Z8 ,
http://www.youtube.com/watch?v=MbvuKPtbq5U, все прошло отлично, Спасибо
автору http://easyelectronics.ru !!! <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/50b861dce69670ade569118dd7de2244.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/cd5c129c71426776a1754985d06d7f8f.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/15dce574366b9ad2a90b404250ef4211.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Я 9мая2012<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/cba0c9ff07a6323be3146227ce3ff034.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Снимать пульс со лба оказалось сложнее, чем я думал вначале, сигнал слабый и
капризный, и к тому же слишком сильно нужно подсвечивать инфракрасным
светодиодом, что быстро посадит батарейку, да и нагрев лба будет
сильным. В общем, временно эту идею откладываю в сторону. Вот сделал
датчик пульса на палец, подсветка инфракрасным светодиодом слабая, а
сигнал достаточно хороший. Сигнал на картинке с пальца.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/0c02a9b4c7f5db4afb74344fa95f4575.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Одел термоусадочный кембрик, поднастроил немного усилитель, и графики стали покрасивее. Сигнал пульса с пальца.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/d407fcfa2a6f3b6b9f48bf98db8695f9.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>А это график пульса со лба чуть выше межбровья, на внешний датчик. 
Вполне читаемый. Кстати во внешнем датчике светодиод и фототранзистор 
расположенны намного ближе друг к другу, может в этом все дело. Нужно в 
следующей версии разместить их на основной плате ближе друг к другу и 
будет как на внешнем датчике.<br>
<br>
<br>
<p><a href="{{ site.baseurl }}/assets/images/history01/BLOCK_SCHM_EZOELECTRO-Remdetector-v3.pdf"><img src="{{ site.baseurl }}/assets/images/history01/cc468fd122a81ce5dd55494558911b90.jpg"/></a></p>
<p></p><p>Схема (<a href="{{ site.baseurl }}/assets/images/history01/SCHM_EZOELECTRO_Remdetector_v3_230712.pdf">скачать SCHM_EZOELECTRO_Remdetector_v3_230712.pdf</a>)</p>
<p></p><p>Схема (<a href="{{ site.baseurl }}/assets/images/history01/SCHM_EZOELECTRO_Remdetector_v3_010812.pdf">скачать SCHM_EZOELECTRO_Remdetector_v3_010812.pdf</a>)</p>



<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/08d39cc620bf822ed408ba7d84b6ffe3.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>График с поясного датчика дыхания SM50+AD7799<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/6c6122d73e93d53332efe770c4e62157.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>График с поясного датчика дыхания SM50+AD7799<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/72e69de43eb203c61633b0a97d5fae42.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>График с поясного датчика дыхания SM50+AD7799<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/35d33007dbfe906be3b5af1c4d99a9aa.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>График с поясного датчика дыхания SM50+AD7799<br>
Александр Коблов: На графике видно место, где я набрал воздуха и задержал
дыхание. Еще выяснилось, что при дыхании я больше всего времени
нахожусь без воздуха в легких, т.е. быстрый вдох-выдох задержка,
вдох-выдох задержка и т.д. А это не правильно. Для хорошего здоровья
нужно делать быстрый вдох и медленный выдох, чтобы воздух дольше
находился в легких. Даже дыхательные тренажеры для этого есть -
дыхательный тренажер Фролова. От всех болезней. У моего деда такой есть.<br>
Еще
выяснилось что датчик жестковат, ход у него маленький, нужно более
эластичный ремень найти. Ну и закрепить хорошо, а то разматывался
ремень. <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/a55816faaaa3f59cb2af34c29422a035.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>График с поясного датчика дыхания SM50+AD7799<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/54383f65810fdddc5208e9dfdd8ca469.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Дыхание и пульс одновременно в реальном времени<br>
<br>
<br>Александр Коблов: Сегодня получилось заставить работать одновременно датчик
пульса, датчик дыхания, акселерометр, датчики движения глаз с
усилителем и без, микрофон. В общем все данные лются в комп
одновременно. Правда пришлось снизить скорость опроса с 250Гц(4мс) до
100Гц(10мс) из-за того что приходится ждать оцифровки с ацп датчика
дыхания. В принципе можно разделить запуск оцифровки и получение
результата на две разные команды между которыми можно опрашивать
акселерометр. Но пока это не горит. В общем если понадобится повысить
частоту опроса это можно будет сделать. Сейчас буду дописывать протокол
обмена, чтобы ничего не значащих битов в байтах не было, т.е. типа
компрессии данных в микроконтроллере и растягивание их в компе. Сейчас
например у меня в 16ти битной переменной передается 10ти битная
величина, что не рационально, 6-бит не используются, но пересылаются в
комп занимая место, а таких 16ти битных переменных у меня 8.<br>
<br>
mws:
Да, график отличается конечно, впрочем оно и понятно.Кстати вначале
хотел сам сделать пульсоксиметр и нашёл интересные штучки:
LIGHT-DIGITAL CONVERTER<br>
Даже затарился ими, но потом так и не пригодились.<br>
<br>
Александр
Коблов: интересная штука, я тоже находил како то подобный датчик в
корпусе DIP8 из полностью прозрачного пластика, для пульсосксиметрии,
но он был и дорогой и под заказ, не помню даже как назывался, может на
работе pdf-ка осталась<br>
<br>
mws: Помню я тот датчик, инфракрасный к
тому же аналоговый, сам хотел на нём делать когда-то, А этот цифровой,
двухканальный (красный+ИК), да ещё с цифровой регулировкой усиления.
Фантастика просто, будущее наступило, ёлки.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/d6ca3aba96a801241ccb3dedcc2028c0.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/d040e889bcb43f5d4e029c39ac14c330.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Прога тестирующая передачу данных, в окошке описание содержимого пакета<br>
</p>
<code>
<br>
Александр Коблов:     <br>
Структура пакета:<br>
struct struct_data_pack {<br>
<br>
unsigned char START :8;<br>
<br>
unsigned char FOTO1_NOAMP_L8 :8;<br>
unsigned char FOTO1_NOAMP_H2 :2;<br>
unsigned char FOTO2_NOAMP_H2 :2;<br>
unsigned char FOTO1_AMP_H2 :2;<br>
unsigned char S_KEY1 :1;<br>
unsigned char S_KEY2 :1;<br>
unsigned char FOTO2_NOAMP_L8 :8;<br>
unsigned char FOTO1_AMP_L8 :8;<br>
<br>
unsigned char FOTO2_AMP_L8 :8;<br>
unsigned char PULS_NOAMP_L8 :8;<br>
unsigned char PULS_AMP_L8 :8;<br>
unsigned char FOTO2_AMP_H2 :2;<br>
unsigned char PULS_NOAMP_H2 :2;<br>
unsigned char PULS_AMP_H2 :2;<br>
unsigned char S_RED_LEDS :1;<br>
unsigned char S_IR_LEDS :1;<br>
<br>
unsigned char MIC_AMP_L8 :8;<br>
unsigned char DATA10bit_L8 :8;<br>
unsigned char MIC_AMP_H2 :2;<br>
unsigned char DATA10bit_H2 :2;<br>
unsigned char S_LOWBAT :1;<br>
unsigned char S_VIBRO :1;<br>
unsigned char S_BEEPER :1;<br>
unsigned char reserved :1;<br>
unsigned char BR_AD7799_H8 :8;<br>
<br>
unsigned char BR_AD7799_M8 :8;<br>
unsigned char BR_AD7799_L8 :8;<br>
unsigned char X_LIS3DH_H8 :8;<br>
unsigned char X_LIS3DH_L8 :8;<br>
<br>
unsigned char Y_LIS3DH_H8 :8;<br>
unsigned char Y_LIS3DH_L8 :8;<br>
unsigned char Z_LIS3DH_H8 :8;<br>
unsigned char Z_LIS3DH_L8 :8;<br>
<br>
unsigned char CRC8 :8;<br>
};<br>
<br>
</code>
<p>
всего 22 байта, очень даже компактненько.<br>
<br>
<br>
а это структура собранных данных уже в компе:<br>
</P>
<code>
struct struct_data_pack_assembly {<br>
unsigned short FOTO1_NOAMP :10;<br>
unsigned short FOTO1_AMP :10;<br>
unsigned short FOTO2_NOAMP :10;<br>
unsigned short FOTO2_AMP :10;<br>
unsigned short PULS_NOAMP :10;<br>
unsigned short PULS_AMP :10;<br>
unsigned short MIC_AMP :10;<br>
unsigned short DATA10bit :10;<br>
signed short X_LIS3DH :16;<br>
signed short Y_LIS3DH :16;<br>
signed short Z_LIS3DH :16;<br>
signed long BR_AD7799 :24;<br>
unsigned char S_KEY1 :1;<br>
unsigned char S_KEY2 :1;<br>
unsigned char S_RED_LEDS :1;<br>
unsigned char S_IR_LEDS :1;<br>
unsigned char S_LOWBAT :1;<br>
unsigned char S_VIBRO :1;<br>
unsigned char S_BEEPER :1;<br>
unsigned char reserved :1;<br>
unsigned char CRC_OK :1;<br>
};<br>
</code>
<p>
<br>
Артём Синин:<br>
1. Саш, а как прибор подключается - по COM-порту или по USB? Я так понял, по USB, но определяется как COM-порт?<br>
2. И каким образом включаются вибро- и прочие сигналы? Он читает порт, или как-то определяет моменты?<br>
3. И ещё, как дела и какие планы с софтом?<br>
4. И насколько будет сложно перепрошивать устройство, в смысле обновлений?<br>
5. И что с ценой - есть ли уже какие-то прейскуранты?<br>
Супер. Интересно попробовать! v<br>
<br>
Александр Коблов:<br>
1.
Подключается по USB но в компе появляется как дополнительный COM порт,
может в будущем сделаю как usb устройство чтобы не приходилось в
программе выбирать какой именно COM порт<br>
2. Вибро, пищалка,
светодиоды и т.д. включаются и выключаются пока с компа, подачей
однобайтовых комманд, в одном байте можно передать 256 разных комманд.
В микроконтроллере настроенно прерывание если пришли какието данные в
порт, срабатывает прерывание и обработчик прерывания смотрит какая
именно комманда пришла и включает или выключает флаг вибры или пищалки
и т.п. А в main есть обработка этих флагов, включить или выключить и на
какое время пищалку, вибру и т.п.<br>
3. Софт на комп начну писать через
неделю, сейчас улетаю в питер в коммандировку. Артем а у тебя есть
какое нибудь описание алгоритмов по обнаружению фазы быстрого сна
применяемых в твоей программе - онейрограф? может ты тоже включишь
ремдетектор в список поддерживаемых устройств?<br>
4. Обновления
прошивок будут делаться очень просто, так же как в ардуино, в
микроконтроллере будет прошит на программаторе bootloader, а дальше при
каждом включении будет ждать комманды на прошивку просто с компа по
usb, если ее не будет, то включаться в рабочий режим. Пока не выбрал
какой бутлоадер лучше использовать.<br>
Бутлоадер будет обеспечивать при одном железном устройстве разные функциональные устройства, а именно:<br>
*1. регистратор данных со всех датчиков в комп<br>
*2. регистратор данных со всех датчиков на флэшку<br>
*3. Прибор типа "кнопка"<br>
*4. прибор типа "кнопка" с акселерометром(падающая рука)<br>
*5.
автономный обнаруживатель фазы быстрого сна и разные его варианты с
глазами или просто по пульсу и дыханию, так еще можно батарейку
поэкономить<br>
6..... много чего еще можно придумать<br>
5. цена будет:
сибестоимость + 20%, из которых 10% мне, а 10% продавцу, ну или все 20%
мне если буду сам продавать. Сибестоимость будет абсолютно прозрачна,
стоимость деталей + стоимость платы + стоимость монтажа, можно будет
купить просто плату и самому спаять. Может конструкторы будут типа
спаяй сам. Правда говорят бывают паленые радиодетали продают поставщики
компонентов, но мне еще не попадались. Поэтому этот вопрос пока не
решен. В общем пока все это в теории, как будет в реальности и какие
еще подводные камни могут появится поживем увидим. Так как я
представитель завода печатных плат, мой основной интерес продавать
просто платы по стандартной цене завода "Электроконнект", поэтому
заказать эти платы на каком то другом заводе будет нельзя, это основное
условие.<br>
А главное мне нравится всем этим заниматься.<br>
Сегодня был
на семинаре Торсунова Олега Геннадьевича, он приехал к нам в Ростов, и
в самом начале он сказал, что главное что мы должны понять то, что мы
не физическое тело а тонкое тело. И что мы не исчезаем после смерти
грубого физического тела. И цель наща развиваться и духовно тоже. Поняв
это и жить станет счастливее и лучше. И я подумал ОСы как раз дают
почувствовать, что мы не только физическое тело, у меня именно так это
было.<br>
<br>
Александр Коблов: Чтобы войти в режим прошивки нужно будет
при включении держать нажатыми одну или две кнопки и бутлодер войде в
режим обновления прошивки. т.е. пользователю программатор будет не
нужен. Кстати нужно будет в ремдетектор 4 версии добавить отдельную
кнопку включения/выключения про которую в 3й я забыл. Насчет бутлодера
- нашел уже несколько разных, вот например USB PIC Bootloader PIC-BOOT
в нем можно даже использовать шифрование прошивки для сохранения в
секрете какихто авторских алгоритмов. Т.е. ключ прошивается один раз на
программаторе в бутлодер в микроконтроллер, и микроконтроллер
защищается от чтения, сама прошивка закодированна и раскодируется на
лету бутлодером при обновлении прошивки. Может это и не понадобится но
в принципе такая возможность есть. Есть еще бутлодер от CCS
компилятора, этот компилятор я использую, еще есть от самого Microchip.
В общем выбор есть.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/5d6f60e1cf1386841ae48b0e06042da1.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>В окошке пакеты без заголовков<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/74ad223d03aaa3cede34641f39c0b8ac.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Данные с Remdetectora 3.0 пока в одну кучу, датчики никуда не подключены<br>
<br>
Александр
Коблов: В принципе железяка готова, все данные передает в комп, можно
начинать писать новый регистратор и анализатор. Для поиска той самой
фазы быстрого сна. <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/2a580f9c8a6bb460bd0b728c8dab1162.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Добавил в ремешок поясного датчика дыхания жесткую
резинку, для увеличения растягивания ремня. Жесткую сделал потому что,
когда замерил сантиметром насколько меняется объем живота при дыхании,
получилось 1см. С таким ремнем более комфортно стало. <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/9d617122b8071eabaa660d9fd4d456df.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Графики все выводятся. Теперь буду писать софт для записи всего
этого в файл, а потом читать из файла и просматривать, в разных
масштабах. <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/5d770c9b5e658aabbfd49e7fd423863d.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Одновременно: дыхание в микрофон - график розового цвета и
дыхание с поясного датчика - график синего цвета. Микрофон реагирует
только на выдох, хотя если его очень близко поднести к ноздре то и вдох
заметен.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/6cba698fecf05f4cf7908f0a02ac0fb7.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Акселерометр зашкаливает при включении вибромоторчика(они на
одной плате). На графике акселерометра видно три включения вибры. Также
заметно искажается сигнал от датчиков движения глаз и пульсометра,
возможно вобромоторчик много потребляет и идет провал по напряжению,
надо разобраться.<br>
<br>
Александр Коблов: Частично понял, у меня нет
источника опорного напряжения для микроконтроллера, вместо него внутри
микроконтроллера подключено напряжение питания. Поэтому и встроенный
вольтметр ничего не меряет. Нужно на вход VREF подать опорные 3.3В. А
сейчас падает напряжение питания, вместе с ним падает и опора, а
напряжение питания измеряется относительно опоры, т.е. изменения нет,
они вместе просели на 0.3В.<br>
Ну и на датчиках движения глаз есть провалы думаю также из-за проседающего опорного напряжения.<br>
Выход
- ставить источник опорного напряжения например LM336. Ну а можно и так
оставить. Просто не анализировать сигналы во время работы вибры.<br>
<br>
mws:
А цепи питания аналог и цифра развязаны? Обычно для АЦП и прочих
аналоговых цепей отдельный вход питания и земля, я их подключал через
LC-фильтр к основному питанию, также как это сделано на демо-платах. В
противном случае блуждающие токи могут вызвать очень сильную наводку.<br>
<br>
Александр
Коблов: да аналог и цифра развязанны, на отдельных плейнах - на
внутренних слоях печатной платы, LC фильтры поедусмотренны, но вместо
индуктивностей пока впаял резисторы с нулевым сопротивлением - просто
как перемычки. Индуктивности 0805 пока не попались на глаза на
радиорынке. Как куплю то впаяю их.<br>
Тут дело не в наводках, а в том
что напряжение питания проседает на 0.3 вольта когда вибра включается,
это не шумы, а проседание постоянной сосовляющей пока моторчик жужжит.
Смотрел на осциллографе шину питания. И фильтры врядли спасут. Слабый
источник питания(DC-DC), он в пике 300мА выдает (AM1P-0503SZ), а в
обычном наверное 200мА. А один вибромоторчик потребляет 50-70мА.<br>
Я
еще не замерял сколько все устройство стало потреблять после
подключения поясного датчика дыхания, дело в том что в этом конкретном
экземпляре датчика в мосте использовались низкоомные тензорезисторы 350
ом, может изза них потребление вырасти. Может можно будет заказать этот
датчик с более высокоомными тензорезисторами, например по 5K,
теоретически потребление должно снизится. Ну или отключать датчик
переодически, AD7799 это умеет.<br>
<br>
mws: Он же не стабилизированный,
конечно будет просадка. Я бы поставил ещё добавочный стабилизатор,
например КР1158ЕН3 при токе 100мА ему будет достаточно падения
напряжения не более 0.1В, и на выходе стабильное напряжение, а вибру
запитал бы напрямую, без стабилизатора, прямо от преобразователя, чтоб
уменьшить влияние.<br>
<br>
Александр Коблов: у линейного стабилизатора
типа кр1158ен3 очень низкий КПД, и он будет греться. А как ты понял что
am1p-0503sz не стабилизирован? dc-dc этоже вроде и есть импульсный
преобразователь-стабилизатор<br>
<br>
mws: В гугле по первой же ссылке, сразу написано "данный конвертер питания не имеет стабилизации выходного напряжения".<br>
кр1158ен3
будет иметь низкий КПД только в случае, если напряжение на входе сильно
превышает выходное, а если на нём будет падать 0.2-0.3 Вольта, то
рассеиваемая мощность на нём будет не более 0,06 Вт при токе 200 мА,
это мизер для такого корпуса, нагрев будет минимальный, а КПД в районе
90%.<br>
<br>
Александр Коблов: нашел это описание но понять его не могу, как это без стабилизации?<br>
в даташите про отсутствие стабилизации ничего нет.<br>
Про
линейный стабилизатор, спасибо за ознакомление, можно будет его
добавить на плату источника питания. Но сначала надо понять, как
работают dc-dc конвертеры.<br>
<br>
Александр Коблов: в даташите нашел
Load voltage regulation +-20%, это видимо стабилизация но сильно
большой разброс. значит доп стабилизатор нужен.<br>
кстати у меня на
плате есть стабилизатор max1674, он батарейку 1.5в высасывает, до 0.7в,
делает 3.3в. Можно попробовать на него подать напряжение с DCDC. Да и
вообще от батарейки запитаться и посмотреть что с виброй, чтото я про
нее совсем забыл.<br>
<br>
mws: На этой странице трижды написано про отсутствие стабилизации :)<br>
В даташите явно не сказано, но приведены конкретные параметры:<br>
Line voltage regulation (Single) For 1% change of Vin ±1.2 %<br>
Load voltage regulation (Single) 3.3V output model Load 20 – 100% ±20 %<br>
Изменения выходного напряжения при изменении входного на 1% и при изменении нагрузки от 20 до 100% соответственно ±1.2 % и ±20 %<br>
Ни какой стабилизации тут явно быть не может.<br>
dc-dc
конвертер состоит из генератора, трансформатора и выпрямителя, в
стабилизированных ещё имеется цепь обратной связи, с помощью которой
отслеживается выходное напряжение и осуществляется подстройка, обычно
при помощи ШИМ, эти "лишние детали" естественно удорожают и конструкцию
и размеры, особенно если требуется выдержать требования по изоляции.<br>
PS пока писал ты сам ответил :)<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/679e888f46aa797976af6cd94b496128.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br> Александр Коблов: Увеличил время работы вибры, и обнаружилось что скачки
случаются только в момент включения вибромоторчика и в момент
выключения (с красными светодиодами тоже самое). На картинке
акселерометра видно период работы вибры (точки от 400 до 800), а по
графикам с датчиков глаз и пульса(два верхних, видно что аномалии
только в моменты включения и выключения вибры, т.е. когда вибра
работает все более менее нормально. Еще замерил токи потребления,
26.5мА с поясным датчиком, 89,7мА с включеной виброй, 47.2мА с
включенными красными светодиодами. Без поясного датчика 17мА, а с
виброй 81,8мА, и 38.7мА со светодиодами. Это все без всяких программных
оптимизаций по энергопотреблению. И микроконроллер работает на 32Mhz.
Можно посчитать, что тензомост поясного датчика потребляет 9.5мА, что
достаточно много при питании от батареек. Питание в схеме 3.3в.
Попробую программно отключать тензомост между опросами. И спрошу у
производителя датчиков, можно ли увеличить сопротивление тензомоста в
поясном датчике дыхания.<br>
<br>
Александр Коблов: Производитель
датчиков дыхания КРИВЕЦ Дмитрий Владимирович сказал, что датчики с
более высоким сопротивлением можно делать и в следующий четверг
постарается ответить сколько будет стоить такой датчик с
тензорезисторами на 1К (вместо 350 ом). Пока попробую отключать его
между опросами.<br>
<br>
Александр Коблов: Дмитрий Владимирович выяснил
что датчик с тензорезисторами на 1К будут стоить на 100-200руб дороже,
что вполне приемлемо. Но заказывать нужно не менее 25 датчиков. Так что
пока экспериментировать буду с тем что есть (по 350 ом).<br>
<br>
Александр
Коблов: Кстати можно еще попробовать плавно включать и выключать вибру,
чтобы стабилизатор успевал стабилизировать резкие изменения на шине
питания. А еще можно попробовать увеличить конденсаторы на шине питания
(сейчас суммарно 100мкф после DC-DC и 4.7мкф перед DC-DC, т.е.после
USB).<br>
<br>
mws: Можно попробовать питать вибру через LC-цепочку, я
питал свою через дроссель, дм0,4-20 и конденастор 1000 мкФ х 6 В (хотя
вероятно конденсатор можно и поменьше поставить), вот такую фигню делал:<br>
Тогда мне это помогло, потом избавился от помех, применив другой стабилизатор.<br>
Так
как вибра даёт бросок в момент пуска, то конденсатор снял проблему
запуска. Запускать от пониженного напряжения можно конечно, но я бы не
стал на это рассчитывать: при снижении напряжения вибра может
запускаться нестабильно. Я наоборот планирую сделать форсированный
старт на пониженной мощности: сначала включать кратковременно на
максимуме, а потом снижать напряжение, иначе ниже определённого порога
просто не запускается, пищит, но не вибрирует.<br>
<br>
Александр Коблов: а какой стабилизатор?<br>
мне
сегодня один клиент рисовал схему запуска вибры через RC цепочку. В
общем нужно поэкспериментировать. Если не получится, то стабилизатор
поставить.<br>
<br>
mws: кр1158ен3.3 поставил, до этого стоял LM313,
питание было от USB и напряжение просаживалось, из-за того, что LM313
работал на грани, ему надо 2 Вольта падения, и от USB без вибры тянул,
а с виброй подсаживал, для ен3.3 достаточно 0,6 В, при максимальном
токе, так что со стабилизацией он отлично справлялся, к тому же намного
меньше шумит. А сейчас стоит PSR-783R3, питание от батарей, и ЕН3.3 тут
не подойдёт как раз по причине КПД.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/9cb16466e6903fc98c2673d337b731a3.jpg.png" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Получилось снизить потребление тока поясным датчиком дыхания. с
9.5мА до 5.5мА. Теперь когда датчик не опрашивается от него отключается
земля. На осциллограмме видно, что теперь питание на датчик подается
только в период опроса он составляет 5.5мс. А 4.5мс датчик не
запитывается. Еще правда эта экономия получилась за счет ускорения
опроса, соответственно снижения качества оцифровываемого сигнала с
24бит до 16бит. Можно еще запитать тензомост через резистор, тогда еще
снизится потребление тока, но тоже ухудшится сигнал. В общем много
вариантов.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/55d99cffd088eeaa61559ba39a4a66fe.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Провалы напряжения были точно из-за стабилизатора, или вернее
его отсутствия. На картинке устройство запитанно от одной батарейки AAA
через стабилизатор max1674, получается 3.3в. Четко видно что при
запуске вибры и при ее остановке помехи на сигналах минимальны. Запуск
и остановку вибры видно по акселерометру (~300~700точки). Сейчас
попробую подать на этот стабилизатор не 1.5в от батарейки, а 3.3в от
DCDC, интересно что получится. Этот стабилизатор обычно запитывают от
батарейки, интересно как он себя поведет запитанный от DCDC<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/3281c054227e759789994249be5032b3.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: На этой картинке запитал max1674 от DCDC3.3в(после DCDC тоже
3.3в, видно как сильно возросли шумы даже на не усиленных сигналах. Да
и всплески при старте и остановке вибры маленькие все же есть. Вывод:
max1674 нужно запитывать батарейкой, как в даташите и написано. Нужно
поискать другой стабилизатор с высоким КПД, из 3.3в в 3.3в. Либо
оставить все как есть и не анализировать сигнал во время работы вибры.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/22e6b643e36c00deb6b73cfebdf2be76.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Интересный эффект: если затаить дыхание, то на поясном датчике
дыхания SM50 виден пульс. Это говорит о высокой чувствительности
датчика и АЦП AD7799.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/0d91ac7c7c31ddacbbc5ab85986a4c76.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br> Александр Коблов: Еще раз затаил дыхание, виден пульс на графике с датчика дыхания SM50.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/541f57397793d2e20c2115668502c0d4.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Картинки с обычным дыханием. Есть предположение, что пульс еще
и будет помехой для поясного датчика дыхания. Например при слабом
поверхностном дыхании, думаю он будет мешать. <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/27752672d5bf80978244e31c18ec02f0.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Провала напряжения практически поборол, поставил стабилизатор
LM1117 на 3.3В. DCDC заменил на AM1P-0505SZ. Стало намного лучше.
Графики без заметных провалов. Также повысил частоту опроса датчиков со
100Гц, до 125Гц. Чтобы не путать с помехой от ламп дневного света, они
на 100Гц мерцают. Еще сделал запрос у поставщика радиодеталей на DCDC:
AM1DR-0503SH30Z, AM1DR-0503SZ. У них встроенный стабилизатор, т.е.
можно будет LM1117 не использовать.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/f9dadad588cd0dae33dc66f2ef97d4bf.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Ползунками внизу на картинке выбран просмотр отрезка между
14:02:53.71 и 14:04:43.46. Сам файл содержит данные с 14:01:52.21 до
14:07:25.39. Если стоит галочка на FIX то двигая верхний двигается и
нижний ползунок. Правда сейчас заметил что ползунками выбор отрезка не
совсем удобен при длинной записи, сложно выставить ползунки чтобы между
ними был маленький зазор.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/2aa9efe7efbda0c0b981d2cc0733ce8d.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Сделал запись в файл и просмотр данных, масштабирование,
просмотр отдельного участка данных. Память ограничена на 6Млн пакетов
(в одном пакете данные со всех датчиков в определенный момент времени),
при времени между пакетами 8мс, этого хватит на 13 часов. При
превышении нужно писать в другой файл.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/9859e2559064a949692878d4d1e5101b.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Файл сделал текстовым, данные в нем выглядят, как на картинке.
Справа врем записи пачки пакетов на диск. Время между пакетами 8мс, это
для точного вычисления временных интервалов относительных и абсолютных.
Правда такой текстовый формат много занимает места на диске. Получается
файл за 17минут30сек весит 10,77Мб. Это за секунду 10,26Кб. По расчетам
за 12 часов файл будет 443Мб. Многовато. Видимо придется двоичный файл
делать.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/01ff3617ad4f5582d9d36cd8e4438f99.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Записал две ночные сессии данных с датчиков. Remdetector
задействовал в упрощенном виде, без повязки на глаза. Из-за жары. Жарко
сейчас в повязке на глазах спать. Был в рубашке, в нагрудный карман
положил плату ремдетектора, на пояс датчик дыхания, на палец датчик
пульса. Записалось нормально. По графикам с первого взгляда фазы
быстрого сна не особо видно. Обычные сновидения были, 2-3 каждую ночь,
их я записал в дневник. Теперь их нужно найти на графиках. Нужно все
таки записать с повязкой на глаза. Но в общем результатом доволен,
можно анализировать графики в оффлайн. Еще хочу одновременно видео
записать с вэб камеры. Тогда будут полные данные для анализа.
Акселерометр хорошо фиксировал все повороты. Еще обнаружилось что если
в кровати передавить вену на руке, то пульс не фиксируется, у меня
гдето минут 40 на одном графике пульс отсутствовал, хотя дыхание было.
Так же на другом графике гдето час не было данных с поясного датчика
дыхания, видимо он както передавливается, когда лежишь на животе.
Размеры файлов с 0:02:14 до 8:18:50 304мб, второй c 23:18:13 до 9:01:08
357мб. <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/9847728d07950bb03a651254ddb97437.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br> без повязки на глаза<br>
Александр Коблов: Так выглядит отрезок с 05:48 до 05:50, движения нет, пульс, с
виду равномерный, а дыхание какое то неравномерное, может что то снится
:)<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/5b7022b4bc5c167ec06cbafae5c56b53.jpg" alt="img" width="597" class="img-rounded"></p><br>
без повязки на глаза<br>
Александр Коблов: так выглядит запись целиком за ночь с 00:02 до 08:18, по
акселерометру видно что она была не очень спокойная, много ворочался во
сне. Так же с помощью акселерометра я ставил отметки, например тройное
или пятерное быстрое похлопывание по карману с акселерометром.<br>
Александр
Коблов: На графике пульса видно, что в конце почемуто включилась
максимальная засветка датчика, хотя я ничего не нажимал. Может
глюкануло чтото в микроконтроллере. Автоматическое регулирование
яркости (АРУ) или усиления (если с другой стороны посмотреть), пока не
дописал, яркость каждый раз после наклейки датчика на палец выставляю
вручную, кнопочками + и -. Яркость нужно регулировать, потому что
просвечиваемость кожи в разных местах пальца и пальцев разная и и у
разных людей тоже. А фототранзистор работает в определенном диапазоне
яркости засветки. т.е. его нельзя сильно засвечивать, и на слабой
яркости слабый сигнал. Должно быть что то среднее. Для этого и заведен
канал без усиления, он пропускает постоянную составляющую сигнала, в
отличии от усиленного канала, где постоянная составляющая сигнала
отфильтровывается.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/66f2dd15d0ee1bd54346784f1382b6ba.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>без повязки на глаза<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/029588f608ba5b8741c2ec434a2bf557.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>без повязки на глаза<br>
Александр Коблов: интервал с 05:43 по 05:46 видно момент ворочанья по акселерометру, и дыхание усиливалось.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/eed7734b618160ef956e326f2a998959.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Это уже другая ночь, запись с 23:18 по 09:01. Правда здесь
отсутствует фрагмент, минут 5, когда ходил в туалет. Кстати нужно
сделать чтобы во время отключения ремдетектора от компа, в файл
писались нули, чтобы наглядно было видно этот интервал. (датчики долго
отключать, поэтому отключал весь прибор, выдергивая его из USB) На этом
же графике виден участок где был передавлен поясной датчик дыхания (в
районе 1,000,000) по времени это с 01:00 по 01:54. В принципе дыхание
на нем видно но амплитуда очень маленькая. Датчик регистрирует как
слабое дыхание так и очень глубокие вздохи, их видно как пики на
графике.<br>
<br>
Александр Коблов: появилась идея сделать датчик дыхания
из двух акселерометров, один например клеется на ребро, или солнечное
сплетение, а второй на область пупка или рядом. А дыхание получить
вычитая показания одного из другого, т.е. один как опорный.
Акселерометры стоят в районе 30руб(LIS3DH), что очень дешево по
сравнению с 1500руб за датчик дыхания(SM50). Ну или попробовать сделать
датчик из графитовой трубки, как Люк придумал.<br>
<br>
Артём Синин: А что показывает на выходе акселерометр? Можно как-то вычесть показания одного датчика из другого?<br>
<br>
Александр
Коблов: На выходе у акселерометра значение от -32760 до +32768. И так
по каждой оси, X, Y, Z. Нужно расположить акселерометры в одном
направлении чтобы оси совпадали. И например один акселерометр
находящийся на солнечном сплетении выдает по X 100, а второй наклеенный
на живот при дыхании выдает 110 - 130. Вычитаем из второго первый,
получается дыхание плавно меняется во времени от 10 до 30. Повернулись
на другой бок первый выдает 300, второй 340-380. Вычитаем. Дыхание 40 -
80. Делаем такие вычисления для каждой оси. Цифры условные для
наглядности, там они будут значительно больше. Хотя можно и на одном
попробовать сделать, просто его на живот наклеить. И постоянную часть
отбрасывать. Но при этом тело не должно двигаться. <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/137951751f66a207ecf43f6ed33af0dd.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: На верхнем графике видно движение закрытых глаз, вверх вниз и
вправо влево. Красная линия это правый глаз, зеленая - левый. Тонкие
линии это без усилителя т.е. напрямую с фототранзисторов, толстые линии
после фильтра и усилителя. Датчик пульса и дыхания не подключены.<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/c9361c5172207631db14753bdbb23862.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Новую маску делать не стал, переделал от первого ремдетектора. <br>
---------------------------<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/e7daf659e13794abaded4c38eefb850b.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: Припаял еще часть деталей. Заработали датчики движения глаз и
пульса, пока только каналы без усиления - они для настройки яркости
свечения ик-светодиодов. Вибромоторчик отлично вибрирует. Красные и
инфракрасные светодиоды работают. Блок питания из 1.5 в 3.3в тоже
заработал. Акселерометр еще раньше запустился. Хотел сегодня и
усилитель припаять но оказалось конденсаторы не те продали, вместо
2.2мкф -> 1.2мкф, мерил специальным тестером, завтра пойду менять на
радиорынке. <br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/de7228d8492b5733414fa23fd465b2ae.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/bdb0ffe86dea51167fbf8baec60e40cc.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/158493a3d89dc1c3e94795a13e544177.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов: В общем нормальных конденсаторов 0603 на 2.2мкф и 1мкф, найти
так и не удалось (они все 1.2мкф и 0.7мкф), видимо только под заказ
хорошие могут привезти. В итоге припаял 0805(2.2мкф и 1мкф), площадки в
принципе позволяли. Правда при монтаже умудрился зажимом платы отбить
конденсатор вместе с площадками, пружинный зажим ударил, нада
поаккуратней в следующий раз. На картинке видны две проволочки и
навесной монтаж одного конденсатора. Еще обнаружилось что пищалка
просто так от порта микроконтроллера не пищит, тока видимо не хватает,
пришлось подпаивать транзистор. Флэшку и АЦП тензометрического датчика
еще не проверял. Ну а так вроде рабочий прототип, можно дальше играться
:) вес вместе с батарейкой 35грамм, цена комплектующих в районе
1тыс.руб.<br>
-------------------------------------<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/0ddb85dd2637c536c093b3a9aca76c85.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов # 21 марта 2012 в 19:22 +1<br>
    <br>
Датчик
дыхания SM50 представляет собой тензодатчик, отслеживающий силу и
частоту натяжения. Применяется для регистрации грудного или брюшного
дыхания. Регистрирует глубину и частоту дыхания.<br>
http://www.kk-group.ru/loadcells/sm50.htm<br>
http://innovationbs.ru/datchik_dyhaniya<br>
<br>
Артём Синин # 21 марта 2012 в 19:37 +1<br>
    <br>
Ага, спасибо за фотки и ссылки. Я его уже находил в сети, обрадовался было, но позже увидел цену:<br>
<br>
Цена без ремня 3490 рублей.<br>
Цена с ремнем 4990 рублей.<br>
<br>
Для наших целей дороговато выходит.<br>

Александр Коблов # 21 марта 2012 в 19:45 +1<br>
    <br>
Это цена московского перекупщика.<br>
Производство
находится в моем городе Ростове-на-Дону, завтра позвоню им, узнаю. В
мартовском прайсе его нет, но есть похожий SM 10 по цене 1200руб. в
принципе можно и его использовать.<br>
http://www.kk-group.ru/price.htm<br>
<br>
Причем
из 4х фирм использующих этот датчик, трое являются моими клиентами по
печатным платам, если его сняли с производства тоже могу им позвонить
узнать на что они перешли:<br>
<br>
- АРМ студента-валеолога ООО "Фирма "МЕТА", г. Ростов-на-Дону, www.fmeta.ru;<br>
- стабилографа ЗАО ОКБ "Ритм" г. Таганрог, Ростовская область, www.stabilan.com.ru<br>
- системы АРМИС фирмы "КорВита", г.Ростов-на-Дону, www.corvita.ru<br>
- системы АРМис фирмы "Мульти-С", г.Ростов-на-Дону, www.multis.ru<br>
<br>
Артём Синин # 21 марта 2012 в 20:00 +1<br>
    <br>
О, супер. Интересно. Ждём информации.. music<br>

Александр Коблов # 22 марта 2012 в 10:08 +1<br>
    <br>
Созвонился,
КРИВЕЦ Дмитрий Владимирович рассказал что этот датчик раньше были
заказным (т.е. партии для конкретных заказчиков) и в прайсе поэтому их
нет, но сейчас они стали пользоваться огромной популярностью. В прайс
его скоро внесут. Цена 1500руб. Сам датчик это металлический
прямоугольник с проводами. Все ремешки и застежки в комплект не входят.<br>
Мне этот датчик нравится, попробую заложить его аппаратную поддержку в REMDETECTOR.<br>
<br>
Может
Люк ответит на вопрос про сопротивление на вдохе и выдохе на своем
датчике, и его тогда попробую включить. Но он пока молчит и в личке и
на форуме.<br>
<br>
Артём Синин # 22 марта 2012 в 12:48<br>
0        <br>
    <br>
Замечательно.. music<br>
<br>
А
SM10 - для наших целей подходит? И что нужно, чтобы преобразовать
выходной сигнал с этого датчика в звук, чтобы его можно было прямо к
компьютеру подключать?<br>

Александр Коблов # 22 марта 2012 в 13:07 +1<br>
    <br>
Да SM10 уже не актуален, можно и SM50 покупать это он 1500руб стоит.<br>
Как его подключать и как с ним работать еще нужно будет разобраться.<br>
По
теории внутри него есть тензорезистор меняющий свое сопротивление в
зависимости от приложенной нагрузки. Нужно измерять это сопротивление,
дальше во чтото преобразовывать и передавать, это уже не проблема.<br>
<br>
Дмитрий # 21 марта 2012 в 20:50 +2<br>
Я
являюсь разработчиком и в составе ИП Климова производителем датчика
дыхания SM50 www.kk-group.ru . Мои контактные Вы найдете в разделе"О
нас" . Наша цена 1500 руб . Обращайтесь. Удачи! Д Кривец www.kk-group.ru<br>

Александр Коблов # 21 марта 2012 в 21:20 +1<br>
    <br>
отлично, завтра приеду к вам, куплю его<br>
<br>
Александр Коблов # 21 марта 2012 в 21:35 +1<br>
    <br>
честно
такое впечатление, что вся вселенная помогает нам сделать этот прибор,
также как до этого я только узнал что существуют цилиндрические
вибромоторчики, на следующий день чудесным стечением обстоятельств он
был у меня, теперь похожая история с датчиком дыхания :)<br>
<br>
   
Добавить комментарий         Подписаться
на новые     RSS лента     RSS-лента
комментариев<br>
<br>
← Назад<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/32e6eca4a0b78b41c8017ed0b69c330c.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/868e1fcc9f2800b9f7b798f1c3da4b25.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов # 22 марта 2012 в 15:14 +1<br>
    <br>
Датчик
купил (за 1500руб), теперь нужно разобраться, как с него снимать
показания. Дмитрий Владимирович сказал, что внутри тензорезисторы 350
Ом по схеме полного моста Уитстона. Еще что датчик ограничен нагрузкой
3кг (30Н) болтами, они залиты герметиком. Датчик как весы, измеряет от
0 до 3кг.<br>
<br>
Александр Коблов # 22 марта 2012 в 22:14 +1<br>
    <br>
Решил
использовать ацп со встроенным усилителем ad7799(24bit), тем более я с
ним уже работал, он как раз хорош для этих целей, в принципе можно
попробовать и ad7798(16bit), главный их плюс в том что содержат внутри
программируемый усилитель.<br>
Главное теперь на одной шине SPI заставит
работать три устройства:1-Акселерометр LIS3DH, 2-microSD карту и
3-усилитель-ацп ad7799 для датчика дыхания.<br>
<br>
Смотрю я как система
обрастает всякими прибамбасами, что увеличивает ее стоимость. Ну
главное отладить все алгоритмы, а потом уже упрощать и удешевлять.
Можно будет несколько версий приборов делать, просто не впаивая часть
деталей на плату.<br>
<br>
Артём Синин # 22 марта 2012 в 22:16 +1<br>
    <br>
Модульность, мне кажется, решит проблему.<br>
<br>
В
этом номере журнала не добрался ещё до этой идеи. Но дело серьезное,
думаю, за один присест всё равно всё не опишешь и не сделаешь. Так что
- доедем... music<br>

Александр Коблов # 22 марта 2012 в 22:37 +1<br>
    <br>
минус
модульности в больших размерах, если бы не размеры все можно бы было
сделать на модулях Arduino, там есть все и карточки microSD с FAT32 и
беспроводная система передачи данных, USB, RS232, АЦП всякие, блютуз,
эзернет, wifi, 3g, индикаторы, кнопки и т.д. полностью открытая
архетектура и исходные коды, кросплатформенность и т.д.<br>
только датчики подключить и софт писать.<br>
http://ru.wikipedia.org/wiki/Arduino<br>
http://jt5.ru/<br>
<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/868e1fcc9f2800b9f7b798f1c3da4b25.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/4dedb087641fff403c3f6df098ca6dcc.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
-----------------------------------------------------------------------------------------------------------------<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/fa11f63468f65db91df888a4a3a3dc3d.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов # 15 марта 2012 в 12:12 +2<br>
    <br>
http://www.precisionmicrodrives.com/vibrating-vibrator-vibration-motors/pancake-shaftless-coin-vibration-motors/design-considerations<br>
<br>
Артём Синин # 15 марта 2012 в 14:42<br>
0        <br>
    <br>
Прикольная штучка. Интересно, достаточно ли сильно вибрирует, для наших сновиденных дел?<br>

Александр Коблов # 17 марта 2012 в 16:05 +1<br>
    <br>
Сравнивал
вибрацию с обычным моторчиком (он поменьше чем в дримсталкере), она
конечно слабее думаю процентов на 30%. Но все равно достаточно сильная,
думаю на лице будет хорошо чувствоваться. Сделаю прототип, проведу
эксперимет, тогда точно будет понятно достаточно или нет. На крайний
случай можно поставить QX-6A-1
(http://www.chipdip.ru/product/qx-6a-1.aspx) который я изначально
планировал, похоже именно он стоит на Дримсталкере, он вибрирует очень
сильно, он у меня тоже есть.<br>
<br>
Александр Коблов # 17 марта 2012 в 16:14 +1<br>
    <br>
или поставить такого же дискового типа но диаметром 12мм (а не 10мм) у него вибрация посильнее будет:<br>
<br>
Diametr.: 8 mm Amplitude: 0.7 G<br>
Diametr.: 10 mm Amplitude: 0.9 G<br>
Diametr.: 10 mm Amplitude: 0.95 G<br>
Diametr.: 10 mm Amplitude: 1.4 G<br>
Diametr.: 12 mm Amplitude: 1.7 G<br>
Diametr.: 12 mm Amplitude: 1.25 G<br>
<br>
Хотя из таблички видно что и в диаметре 10мм разные интенсивности вибрации бывают.<br>
(Табличку получил из ссылки указанной выше.)<br>
<br>
Артём Синин # 17 марта 2012 в 17:36<br>
0        <br>
    <br>
В
дримсталкере вибрация такая, что поначалу буквально подпрыгиваешь. Но
очень быстро наступает привыкание - и уже через неделю я практически
внимание перестаю обращать.<br>
<br>
Думаю, поначалу будет любая вибрация
будить. Но чем выше запас мощности, тем дольше можно будет его
постепенно увеличивать. И, конечно, нужно попробовать сделать
вибро-модуль выносным. Тогда, закрепляя его на разных точках тела -
можно будет гораздо дольше расчитывать на эффект.<br>

Александр Коблов # 17 марта 2012 в 18:27 +1<br>
    <br>
А
если использовать различные варианты вибрации? т.е. длительность
включения, импульсно или продолжительно, с разными комбинациями.<br>
<br>
Артём Синин # 17 марта 2012 в 18:37<br>
0        <br>
    <br>
Думаю, это не сильно поможет. Длительность, разве что.<br>
<br>
Я
когда с вибро-подбуживанием экспериментировал, то взял просто маленький
компьютерный вентилятор, отломал у него одну лопасть, и замотал всё это
дело изолентой. Так вот, удобнее всего оказалось одевать такой модуль
на пятку - будит очень хорошо, даже со временем. И так, то на одну
ногу, то на другую, то на руку, то на плечо повесишь - и вроде проблем
с привыканием не регистрировал.<br>
<br>
А паттерны всякие пробовал - с
просоня, один фиг. Амплитуда больше играет роль, и место расположения
модуля. Но это лишь по моим личным наблюдениям.<br>

Александр Коблов # 17 марта 2012 в 18:56 +1<br>
    <br>
хорошо,
предусмотрю подключение вибромоторчика через маленький отдельный
разъемчик, если что можно будет отключить внутренний, и подключить
внешний вибромоторчик.<br>
<br>
mws # 11 июня 2012 в 22:28 +2<br>
    <br>
Использую
как раз такой, диаметром 8мм. Мощность достаточная, за руку будит
только в путь, если поддать напряженица хотя бы до 6 вольт, так вообще
долбит не по детски. Мне показалось, что он гораздо сильнее
стандартного, по крайней мере слабее тех, которыми приторговывают в
нашем местном сельмаге. Не говоря о том, что удобней в использовании.<br>
Насчёт
режима подбуживания, оптимальным мне кажется побудка коротким мощным
сигналом. Дело в том, что поле подбуживания внезапно увеличивается
чувствительность организма, поэтому длинный тихий сигнал может
разбудить. Хотя это может быть индивидуально.<br>
И ещё тонкость: при
малых напряжениях может не запуститься, запускал при помощи ШИМ - при
большой скважности пыжится, пищит, но не хватает мощи раскрутиться, но
можно запустить, если применить форсированный запуск.<br>

Александр Коблов # 13 июня 2012 в 00:10 +1<br>
    <br>
от
6 вольт думаю может быстро сгореть, эти моторчики в основном рассчитаны
на 3вольта. А насчет короткого сильного сигнала это интересно<br>
<br>
Артём Синин # 13 июня 2012 в 03:19 +1<br>
    <br>
Ребят,
а где вы их заказываете? Я в магазинах не нашёл. По радиорынку походил
- отыскал похожие в разделе деталей для сотовых телефонов. Не знаю, те,
не те, но такого типа. Конечно, лучше, чем моторы - а то там ещё
чего-то крутится, надо в корпус одевать, чтобы ничего не намоталось. А
этот положил вон хоть в термоусадку, и готово.<br>
<br>
В процессе ещё не тестировал - посмотрим, как будет будить. )<br>

Александр Коблов # 13 июня 2012 в 05:24 +1<br>
    <br>
я покупаю как раз в магазине запчастей для ремонта сотовых телефонов<br>
тут http://siriust.ru/ или тут http://service-gsm.ru/<br>
<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/d16ffb012e1a79d5f48051e2e222c557.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
-----------------------------------------------------------------------------------------------------------------<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/96a603b429a27e4090d28bcd037d936c.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Попросил жену купить в service-gsm.ru, вибро Samsung J600, она купила G600(по
38руб), я сильно расстроился в начале, но потом она предложила мне его
разломать. И, о чудо, в нем тоже оказался нужный вибромоторчик. Как все
быстро материализуется в нашем мире, только вчера узнал про эти новые
вибромоторчики, сегодня он уже у меня есть. Спасибо моему клиенту
Вячеславу за подсказку где быстро можно найти вибромоторчики.<br>

Александр Коблов # 17 марта 2012 в 15:06 +1<br>
    <br>
В
общем решил окончательно, буду ставить такой вибромоторчик. Вячеслав
подсказал, что обычный будет при вращении цепляться за ткань маски. Как
это я сам об этом не подумал. Интересно в Дримсталкере эксцентрик
вибромоторчика цепляет за маску?<br>
Кстати
еще нашел такие моторчики по
24руб на aliexpress, но нужно заказывать сразу 50шт.
http://www.aliexpress.com/product-fm/514594846-50-PCS-Pancake-3V-Vibrating-Vibration-Vibrator-Cell-Phone-Pager-Motor-10mm-x-2-7mm-wholesalers.html<br>
<br>
Артём Синин # 17 марта 2012 в 17:40<br>
0        <br>
    <br>
Интересно в Дримсталкере эксцентрик вибромоторчика цепляет за маску?<br>
<br>
Не
цепляет, потому что он стоит как раз в самой верхней части платы, где
маска раскрывается, как карман. А так, механизм, конечно, не очень
удобный в использовании без корпуса.<br>

<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/0b9e5f9a6eec7862c66c6a84c4ba0b32.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Появились у меня и эти вибромоторчики, диаметр у них поменьше. Буду закладывать
размер 10мм, если что и эти можно будет поставить.<br>
<br>
----------------------------------------------------------------------------------------------------<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/9ba95f3a55de09091158f484851bccea.jpg" alt="img" width="597" class="img-rounded"></p><br>

Ackaap # 23 апреля 2012 в 19:39 +2<br>
    <br>
Да, интересные приборчики бывают. :)<br>
Не особо в них разбираюсь, но читая описания становиться интересно как работает и на сколько эффективно. :)<br>
Александр, это твоя задумка?<br>

Александр Коблов # 23 апреля 2012 в 21:00 +1<br>
    <br>
Да
я придумал, насчет эффективности пока не известно, нужно сделать и
попробовать. Медитации делать тоже лениво думаю с этой штукой будет
интересней по началу, а как появятся какие нибудь результаты -
интересные, то можно ее и откинуть. И дальше продолжить изучение своей
внутренней вселенной без нее. Как сделать контроллер уже знаю smile как
всегда у меня все упирается в нехватку времени.<br>
Ну а еще такую штуку
можно использовать как необычный вибратор, понаклеить их например на
клитор и вокруг или на член, программу то последовательностей
вибрирования можно задать любую. Тоже интересно попробовать. Так что
предназначение двойное. И самопознание и удовольствие. Вообще часто
бывает что на путь самопознания заманивают например сексом или боевыми
искусствами или царством небесным smile А дальше уже человек сам идет.<br>
Еще можно использовать, как часть системы обратной связи после определения фазы быстрого сна.<br>
<br>
Ackaap # 23 апреля 2012 в 21:29<br>
+1        <br>
    <br>
ну ты расписал... laugh<br>
<br>
В целом идея интересная, но я не могу понять как вибрация способствует развитию ощущения чакр?<br>

Александр Коблов # 23 апреля 2012 в 21:42 +1<br>
    <br>
Вибрация
моторчика просто привлекает внимание в определенное место твоего тела.
Например ты удерживаешь внимание между бровей, а потом тебя увлекли
мысли, потом чтото вспомнилосьи ты уже забыл про медитацию, а тут вжик
вибрация например на 0.5сек с интервалом 1минуту (как подзатыльник
гуру), и твое внимание опять между бровей и сохраняешь внутреннюю
тишину, наблюдаешь мысли, не вовлекаясь. и так каждую минуту вжик на
0.5 сек между бровей, например 10минут. На каждой чакре по 10 мин,
итого 70 вжиков длительностью 0.5сек в течении 70 минут. Потом еще 70
минут вниз.<br>
<br>
Ackaap # 23 апреля 2012 в 22:03 +2<br>
    <br>
Аа, в таком формате... smile ясно...<br>
Классная задумака! ;)<br>

<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/70eb735ddad852eee62a72e3f4287451.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Первая версия виброчакры, размер платы 47x72мм, плата двусторонняя, резисторы
конденсаторы 0805, светодиоды 1206, микроконтроллер PIC18F2520, в SO28
корпусе, 3 кнопки<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/6e328b9fdf5818d66777e0b070416342.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Первая версия виброчакры, размер платы 47x72мм, плата двусторонняя, 
резисторы конденсаторы 0805, светодиоды 1206, микроконтроллер 
PIC18F2520, в SO28 корпусе, 3 кнопки<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/8c244f928c8530a9f2d222cf59273cb6.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов # 15 мая 2012 в 21:46 +1<br>
    <br>
Сегодня
спаял первую версию виброчакры, все резисторы и конденсаторы 0805
паяются легко, микроконтроллер PIC18F2520 может и избыточен для данного
устройства, но у меня их просто валялось 3шт, вот нашёл применение
smile Светодиоды нашел: красный, желтый, зеленый, голубой, вместо
фиолетового белый, а оранжевый и синий попробую получить из желтого и
голубого уменьшив их яркость. К пищалке также допаял транзистор, без
него как выяснилось она не пищит. Прошивку еще не делал. Завтра если
появится время. Семь вибромоторчиков уже купил нужно будет их припаять
к шлейфу. А еще выяснилось что у держателя батарейки полярность
поменяна местами, видимо они не стандартизированны, я рисовал плату по
даташиту другого держателя, ладно для первой версии и так сойдет :)<br>
<br>
<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/1bea33f759fa3837264f0ef893411e3d.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов # 16 мая 2012 в 13:11 +1<br>
    <br>
Сделал
прошивку, моторчики вибрируют, светодиоды мигают, пищалка пищит, еще
надо купить термоусадочных кембриков большого размера чтобы моторчики в
них спрятать. А дальше нужно придумать алгоритм работы этого девайса и
провести испытания:)<br>
<br>
Люк # 27 мая 2012 в 00:12<br>
+1        <br>
    <br>
даже боюсь спросить, что это такое?<br>

Александр Коблов # 27 мая 2012 в 00:22 +1<br>
    <br>
напоминалка
о том в каком месте нужно сосредотачивать внимание, у Дона Хуана для
этой цели были камни которые он клал в определенные места Карлосу
Кастанеде<br>
<br>
<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/704cd4198e1d657b71d64fc6c7966dcf.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>Александр Коблов # 16 мая 2012 в 15:06 +1<br>
    <br>
Тестирую
тут вибромоторчики. Интересное наблюдение, вроде бы расположены далеко
друг от друга, а сложно отличить по ощущениям какой моторчик вибрирует.
Видимо в этой части руки чувствительность точного местоположения слабо
развита. Даже если они вибрируют последовательно, сложно понять какой
именно моторчик вибрирует этот или соседний smile На картинке два слоя
лейкопластыря, чтобы металл к телу не касался, потом моторчики засуну в
термоусадочный кембрик.<br>
<br>
<br>
<br>
<br>
    <p><img src="{{ site.baseurl }}/assets/images/history01/d4d05e37a3b93491cfcb732de8baeccd.jpg" alt="img" width="597" class="img-rounded"></p><br>
<br>
</p>

