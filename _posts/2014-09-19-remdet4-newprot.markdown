---
layout: post
title:  "Remdet4, новый протокол"
categories: Remdet
tags: Remdet
author: Alex Koblov
description: Переделал протокол передачи данных
img: history04/data_packet_v4.PNG # Add image post (optional)
---
<p>Все-таки я переделал протокол передачи данных. Теперь пакеты могут иметь разную форму и хранить данные разной длинны: 1бит, 4 бита, 8бит, 16бит или 24бит, да хоть 128бит, в любых комбинациях. Сейчас сделал два вида пакета: для отладки и для чтения флэшки. Теперь флэшка считывается примерно за 20секунд, раньше, со старым протоколом это было около 4минут, из-за того, что куча не нужного по нему шла. Длину пакета оставил такой же 22байта. Первый байт 0xFE это признак начала пакета, а вот второй байт системный в нем как раз и задается тип пакета, чтобы на стороне компьютера его правильно принять. Так же в этом пакете старшая тетрада используется для дополнительного контроля четности, в ней значения меняются от 0 до 15, для всех отправляемых пакетов. Сделал на всякий случай, бывало, что пакеты выпадали, когда программа на компе сильно загружалась. Сделал эту четность для подстраховки, чтобы увидеть такие моменты и подправить тормоза в проге для компа.</p>
<p><a  href="{{ site.baseurl }}/assets/images/history04/data_packet_v4.PNG" class="highslide" onclick="return hs.expand(this)">
<img src="{{ site.baseurl }}/assets/images/history04/data_packet_v4.PNG" alt="img" width="677" /></a></p>
  <p><a  href="{{ site.baseurl }}/assets/images/history04/prog01.PNG" class="highslide" onclick="return hs.expand(this)">
<img src="{{ site.baseurl }}/assets/images/history04/prog01_sm.JPG" alt="img" width="677" /></a></p>


