<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>ezoelectro История разработок 8</title>

  
  
  <link href="style3_all.css" rel="stylesheet" type="text/css">
</head><body>
<p>&nbsp;</p>

<div id="wrapper">
<p><a href="http://ezoe.ru">Home</a>&nbsp;</p>
<h1>История разработок. Часть 8</h1>
<h2>21 июня 2018</h2>
<div class="centrContent">
  <p>Купил тестовую платку с датчиком расстояния VCNL4010 нарисовал для нее корпус для экспериментов:</p>
  <p><a href="01_case_vcnl4010.JPG"><img src="01_case_vcnl4010_sm.JPG" width="677" height="580" alt="img"></a></p>
    <p>&nbsp;</p>
    <p>Распечатал за 300руб на Picasso 3D принтере с толщиной слоя 0.05мм, вроде нормально получилось:</p>
  <p><a href="02_case_vcnl4010.JPG"><img src="02_case_vcnl4010_sm.JPG" width="677" height="560" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Корпус в разобранном виде:</p>
  <p><a href="03_case_vcnl4010.JPG"><img src="03_case_vcnl4010_sm.JPG" width="677" height="464" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Тестовую плату с vcnl4010 заказывал на Aliexpress за 600руб:</p>
  <p><a href="04_case_vcnl4010.JPG"><img src="04_case_vcnl4010_sm.JPG" width="677" height="623" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Принципиальная схема Remtetector версии 6.0:</p>
  <p><a href="remdet6_schm.pdf"><img src="05_remdet6_schm_sm.png" width="677" height="465" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Собрал макет, пока на блютус модуле BLE112 (в основной схеме используется BLE113):</p>
  <p><a href="06_remdet6_prot.JPG"><img src="06_remdet6_prot_sm.JPG" width="677" height="555" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Макет работает. Тестовая прога, отображает данные с датчика расстояния и акселерометра, принимает по bluetooth 4.0:</p>
  <p><a href="07_prog_remdet6.png"><img src="07_prog_remdet6_sm.png" width="677" height="462" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Нарисовал корпус Remdetector v6.0:</p>
  <p><a href="08_case_remdet6.JPG"><img src="08_case_remdet6_sm.JPG" width="677" height="528" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Развел плату, 4х слойную. На 2слоя влезть было не реально. Все компоненты с одной стороны, при монтаже будет легче. Толщина 1.6мм для простоты прототипирования, можно заказывать по 3 шт, а тонкие платы (0.5мм) нужно было только по целой заготовке заказывать.:</p>
  <p><a href="09_case_remdet6.JPG"><img src="09_case_remdet6_sm.JPG" width="677" height="560" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Разъем для программирования и отладки с платы убрал, он сильно высокий был, да и место занимал. Нарисовал вот такую прищепку. Заказал на Алиэкспресс разъем PogoPin на 8 пружинящих  контактов:</p>
  <p><a href="10_case_remdet6.JPG"><img src="10_case_remdet6_sm.JPG" width="677" height="518" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Плата в корпусе с обратной стороны:</p>
  <p><a href="11_case_remdet6.JPG"><img src="11_case_remdet6_sm.JPG" width="677" height="549" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Окно в корпусе делал по углу рассеивания датчика расстояния:</p>
  <p><a href="12_case_remdet6.JPG"><img src="12_case_remdet6_sm.JPG" width="677" height="482" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Корпус размером 38х54мм, толщиной 7мм. Плата 33.4х23.79мм толщиной 1.6мм:</p>
  <p><a href="13_case_remdet6.JPG"><img src="13_case_remdet6_sm.JPG" width="677" height="447" alt="img"></a></p>
      <p>&nbsp;</p>
      <p>Вид в разрезе:</p>
  <p><a href="14_case_remdet6.JPG"><img src="14_case_remdet6_sm.JPG" width="677" height="446" alt="img"></a></p>


  <p>&nbsp;</p>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>

<div id="wrapper">
<h2>26 июля 2018</h2>
<div class="centrContent">
     
<p>Распечатал корпус Remdet6 за 250руб, толщина слоя 0.05мм. И прищепку разъема программатора за 450руб, толщина слоя 0.1мм:</p>
<p><a href="15_remdet6.JPG"><img src="15_remdet6_sm.jpg" width="677" height="395" alt="img"></a></p>
<p>&nbsp;</p>
<p>Получил из китая трафарет для нанесения паяльной пасты, заказывал на PCBWay, вместе с доставкой $23 (1500руб) пришло за 13 дней. (это вместе со скидкой 5$ на первый заказ):</p>
<p><a href="16_remdet6.JPG"><img src="16_remdet6_sm.jpg" width="677" height="460" alt="img"></a></p>
<p>&nbsp;</p>
<p>Получил платы, заказывал на заводе ЭЛЕКТРОконнект pselectro.ru в Новосибирске:</p>        
<p><a href="17_remdet6.JPG"><img src="17_remdet6_sm.jpg" width="677" height="470" alt="img"></a></p>
<p>&nbsp;</p>
<p>Нашел в медицинском магазине akkomed.ru (ООО НПП "АККО") стекла толщиной 1мм, нарезал обычным стеклорезом. Но думаю для такого тонкого стекла лучше царапать алмазным стеклорезом:</p>        
<p><a href="18_remdet6.JPG"><img src="18_remdet6_sm.jpg" width="677" height="461" alt="img"></a></p>
<p>&nbsp;</p>
<p>Перепрошил свою печку для пайки новой прошивкой. На старой прошивке время в два раза растянуто было. Но и на новой пришлось датчики калибровать, благо она это позволяет сделать. Термопрофиль тоже в ручную настраивал по дополнительной термопаре приложенной к пробной плате. Заставка старой и новой прошивки:</p>        
<p><a href="19_remdet6.JPG"><img src="19_remdet6_sm.jpg" width="677" height="393" alt="img"></a></p>
<p>&nbsp;</p>
<p>Попробовал пасту что у меня была 62NCLR-A(шарики 45-75мкм) покупал в Профи, но она не выходила при поднятии трафарета на площадки акселерометра LGA-16, слишком крупные шарики, купил в Чип и Дип более мелкую CR36 (шарики 25-45мкм), эта нормально пришла. Хотя от второй пасты после пайки много микро шариков по плате, паста наверное кипела, нада термопрофиль поднастроить.</p>        
<p><a href="20_remdet6.JPG"><img src="20_remdet6_sm.jpg" width="677" height="560" alt="img"></a></p>
<p>&nbsp;</p>
<p>Самодельные ракель для нанесения паяльной пасты и пневмопинцет для расстановки smd резисторов и конденсаторов, более крупное пинцетом ставил, а для модуля еще более крупная присоска есть.</p>        
<p><a href="23_remdet6.JPG"><img src="23_remdet6_sm.jpg" width="677" height="455" alt="img"></a></p>
<p>&nbsp;</p>
<p>Закладка платы в печку:</p>        
<p><a href="21_remdet6.JPG"><img src="21_remdet6_sm.jpg" width="677" height="508" alt="img"></a></p>
<p>&nbsp;</p>
<p>Плата до и после оплавления в печи (термопрофиль паяет 5 минут):</p>        
<p><a href="22_remdet6.JPG"><img src="22_remdet6_sm.jpg" width="677" height="465" alt="img"></a></p>
<p>&nbsp;</p>
<p>Тармодатчик примотал сбоку аккумулятора:</p>        
<p><a href="24_remdet6.JPG"><img src="24_remdet6_sm.jpg" width="677" height="539" alt="img"></a></p>
<p>&nbsp;</p>
<p>Прищепка программатора в действии, держит хорошо,  сами контакты называются Pin Pogo TangDa заказывал на Aliexpress: </p>        
<p><a href="25_remdet6.JPG"><img src="25_remdet6_sm.jpg" width="677" height="280" alt="img"></a></p>
<p>&nbsp;</p>
<p>Вес прибора 14гр:</p>        
<p><a href="26_remdet6.JPG"><img src="26_remdet6_sm.jpg" width="677" height="495" alt="img"></a></p>
<p>&nbsp;</p>
<p>Тройные импульсы это закрытие и открытие глаз, а между ними это движение закрытых глаз:</p>        
<p><a href="27_remdet6.png"><img src="27_remdet6_sm.png" width="677" height="432" alt="img"></a></p>
<p>&nbsp;</p>
<p>График красного цвета это датчик расстояния, остальные три это оси акселеромерта:</p>
<p><a href="28_remdet6.png"><img src="28_remdet6_sm.png" width="677" height="432" alt="img"></a></p>
<p>&nbsp;</p>
<p>Ночной график (<a href="remdet6_001_night_8Hz.rar">скачать</a>), весь в едином диапазоне, как не ворочался в кровати и как маска по лицу не ерзала, вот что значит датчик 16bit, изза него RemDet6 и начал делать, раньше было 10bit, и приходилось настраивать рабочий диапазон, и все равно иногда выходил за него (т.е. график опускался слишком низко, так что не видно было что там внизу или поднимался слишком высоко и тоже не было видно что вверху):</p>        
<p><a href="29_remdet6.png"><img src="29_remdet6_sm.png" width="677" height="450" alt="img"></a></p>
<p>&nbsp;</p>
<p>Это фрагмент приближенного ночного графика, видимо это пульс на глазе:</p>        
<p><a href="30_remdet6.png"><img src="30_remdet6_sm.png" width="677" height="451" alt="img"></a></p>
<p>&nbsp;</p>
<p>Remdet6 приклеен двусторонним скотчем к маске. Для надежности можно и болтиками прикрутить, поставив более длинные, насквозь через корпус.</p>        
<p><a href="31_remdet6.JPG"><img src="31_remdet6_sm.jpg" width="677" height="446" alt="img"></a></p>                

</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>

<div id="wrapper">
<h2>29 июля 2018</h2>
<div class="centrContent">
     
<p>Проанализировал различные положения датчика отностительно глаза.</p>
<p><a href="graph01.png"><img src="graph01_sm.png" width="677" height="300" alt="img"></a></p>
<p>&nbsp;</p>
<p><a href="graph02.png"><img src="graph02_sm.png" width="677" height="309" alt="img"></a></p>
<p>&nbsp;</p>
<p><a href="graph03.png"><img src="graph03_sm.png" width="677" height="299" alt="img"></a></p>
<p>&nbsp;</p>
<p><a href="graph04.png"><img src="graph04_sm.png" width="677" height="299" alt="img"></a></p>
<p>Можно сделать вывод, что положения маски на лице и соответственно датчика над глазом, сильно влияет на уровень сигнала. А это при идеальных условиях. А когда спишь и головой крутишь об подушку, то значения будут различны на всем протяжении сна. При анализе это нужно учитывать. Постоянные уровни для поиска фазы БДГ не подойдут, должен быть плавающий алгоритм учитывающий данные смещения.</p>
<p>&nbsp;</p>
<p>Для экспериментов с расположением наделал временных масок (<a href="../article03/mask.html">описание</a>), чтобы не жалко было резать дырки. Основу вырезал из папки:</p>
<p><a href="mask01.JPG"><img src="mask01_sm.JPG" width="677" height="503" alt="img"></a></p>
<p>&nbsp;</p>
<p>Прорези под ремешок делал фрезером:</p>
<p><a href="mask02.JPG"><img src="mask02_sm.JPG" width="677" height="468" alt="img"></a></p>
<p>&nbsp;</p>
<p>Черный паралон не нашел, делал из светлого. Он кстати более плотный, чем на оригинальной маске:</p>
<p><a href="mask03.JPG"><img src="mask03_sm.JPG" width="677" height="522" alt="img"></a></p>
<p>&nbsp;</p>
<p>Прибор Remdet6 прикрепил болтиками, расстояние до глаза примерно 15мм:</p>
<p><a href="mask04.JPG"><img src="mask04_sm.JPG" width="677" height="554" alt="img"></a></p>
<p>&nbsp;</p>
<p>При обычном размещении внутри, расстояние до глаза примерно 5мм:</p>
<p><a href="mask05.JPG"><img src="mask05_sm.JPG" width="677" height="729" alt="img"></a></p>
<p>&nbsp;</p>
               

</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>


<div id="wrapper">
<h2>30 июля 2018</h2>
<div class="centrContent">
<p>Летом при 30 градусной жаре спать в маске не совсем комфортно, думаю можно лишнее обрезать, и дырок насверлить, датчик все равно к внешнему освещению не чувствителен. Remdet6 разместить снаружи, а расстояние до глаза выставлять толщиной поролона.</p>
<p><a href="mask06.JPG"><img src="mask06_sm.JPG" width="677" height="279" alt="img"></a></p>
<p>&nbsp;</p>
<p>Или типа такого варианта:</p>
<p><a href="Halloween-Party.jpg"><img src="Halloween-Party_sm.jpg" width="677" height="677" alt="img"></a></p>
<p>&nbsp;</p>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>


<div id="wrapper">
<h2>07 августа 2018</h2>
<div class="centrContent">
<p>Начертил компактную маску:</p>
<p><a href="sm_mask01.png"><img src="sm_mask01_sm.png" width="677" height="436" alt="img"></a></p>
<p>&nbsp;</p>
<p>Вырезал из папки и паралона толщиной 10мм:</p>
<p><a href="sm_mask02.jpg"><img src="sm_mask02_sm.jpg" width="677" height="496" alt="img"></a></p>
<p>&nbsp;</p>
<p>В собранном виде. Вентиляция гораздо лучше, можно спать даже в жару. Спать на левом боку отлично. А на правом маска еще достаточно сильно выпирает и касается подушки, смещая датчик. Сделал еще держатель ремня на самом приборе для эксперимента по уменьшению маски. </p>
<p><a href="sm_mask03.jpg"><img src="sm_mask03_sm.jpg" width="677" height="409" alt="img"></a></p>
<p>&nbsp;</p>
<p>Записал стандартную  последовательность быстрых движений глаз (по аудиозаписи из моих предыдущих тестов) в разных положениях тела, на спине, на правом боку на левом, и в разных вариациях:</p>
<p><a href="sm_mask04.png"><img src="sm_mask04_sm.png" width="677" height="474" alt="img"></a></p>
<p>&nbsp;</p>
<p>Освоил программу EDFbrowser, для быстрого просмотра и подбора фильтров (<a href="bdf_mini_mask_long.rar">скачать bdf</a>):</p>
<p><a href="sm_mask05.png"><img src="sm_mask05_sm.png" width="677" height="367" alt="img"></a></p>
<p>&nbsp;</p>
<p>Увеличенный фрагмент, сильные всплески это открытие глаз,  пачки импульсов это быстрые движения глаз, влево-вправо, вверх-вниз и беспорядочно, и так много раз в разных положениях тела:</p>
<p><a href="sm_mask06.png"><img src="sm_mask06_sm.png" width="677" height="367" alt="img"></a></p>
<p>&nbsp;</p>
<p>Учтя косяки первой маски, нарисовал вторую. Сместил крепление возле глаза повыше, а то ремешек свободного глаза касался, и с другой стороны сместил крепление ближе к глазу, и маску укородил сбоку, добавил отверсий для вентиляции (<a href="dxf_sm_mask_v2.rar">скачать dxf</a>):</p>
<p><a href="sm_mask07.png"><img src="sm_mask07_sm.png" width="677" height="422" alt="img"></a></p>
<p>&nbsp;</p>
<p>Вырезал и приклеил маску второй версии. Кстати паралон отлично сверлится фрезером, после того как приклеен, до приклеивания он наматывался на фрезер:</p>
<p><a href="sm_mask08.jpg"><img src="sm_mask08_sm.jpg" width="677" height="496" alt="img"></a></p>
<p>&nbsp;</p>
<p>Ремешек хоть и мягкий, но за ночь на уши сверху давит чувствительно, поэтому прикрепил ватные диски для комфорта:</p>
<p><a href="sm_mask09.jpg"><img src="sm_mask09_sm.jpg" width="677" height="614" alt="img"></a></p>
<p>&nbsp;</p>
<p>Так выглядит маска второй версии на мне:</p>
<p><a href="sm_mask10.jpg"><img src="sm_mask10_sm.jpg" width="677" height="313" alt="img"></a></p>
<p>&nbsp;</p>

</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>



<div id="wrapper">
<h2>информация</h2>
<div class="centrContent">
  <p>К рекламе  отображамой на моих страничках я не имею никакого отношения, хостинг narod.ru бесплатный, поэтому они вставляют рекламу какую хотят, куда хотят и как хотят.</p>
</div>
</div>





<p>&nbsp;</p>

<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-12871483-2', 'auto');
  ga('send', 'pageview');
</script>
</body></html>